unit crud_funcionario;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Imaging.pngimage,
  Vcl.ExtCtrls, Vcl.Mask, Vcl.DBCtrls, Data.DB, Vcl.Grids, Vcl.DBGrids,Cadastro_funcionario,
  Vcl.ComCtrls;

type
  Tmenu_funcionarios = class(TForm)
    pnl_crud: TPanel;
    pnl_buttons: TPanel;
    pnl_grid: TPanel;
    img_incluir: TImage;
    img_alterar: TImage;
    img_excluir: TImage;
    btn_consultar: TButton;
    edt_nome_consulta: TEdit;
    lbl_nome_consulta: TLabel;
    lbl_incluir: TLabel;
    lbl_alterar: TLabel;
    lbl_excluir: TLabel;
    dbg_grid_consulta: TDBGrid;
    pnl_altera_funcionario: TPanel;
    lbl_nome: TLabel;
    lbl_salario: TLabel;
    lbl_rua: TLabel;
    lbl_bairro: TLabel;
    lbl_numero: TLabel;
    lbl_cep: TLabel;
    lbl_complemento: TLabel;
    lbl_cidade: TLabel;
    lbl_cargo: TLabel;
    lbl_data_nascimento: TLabel;
    cbx_cargo: TComboBox;
    edt_nome: TEdit;
    edt_rua: TEdit;
    edt_bairro: TEdit;
    edt_complemento: TEdit;
    edt_numero: TEdit;
    edt_cidade: TEdit;
    edt_cep: TEdit;
    edt_salario: TEdit;
    dtp_data: TDateTimePicker;
    procedure img_incluirClick(Sender: TObject);
    procedure btn_consultarClick(Sender: TObject);
    procedure img_alterarClick(Sender: TObject);
    procedure dbg_grid_consultaCellClick(Column: TColumn);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  menu_funcionarios: Tmenu_funcionarios;

implementation

{$R *.dfm}

uses conexao_banco_dados;

procedure Tmenu_funcionarios.btn_consultarClick(Sender: TObject);
begin
  if edt_nome_consulta.Text <> '' then
  begin
    conexao_db.FDQuery1.SQL.Text :=
      'SELECT * FROM FUNCIONARIOS WHERE FUN_NOME LIKE :nome';
    conexao_db.FDQuery1.ParamByName('nome').AsString := '%' + edt_nome_consulta.Text + '%';
  end
  else
  begin
    conexao_db.FDQuery1.SQL.Text := 'SELECT * FROM FUNCIONARIOS';
  end;

  conexao_db.FDQuery1.Open;
end;


procedure Tmenu_funcionarios.dbg_grid_consultaCellClick(Column: TColumn);
var
  clique_grid_linha : boolean;
begin

end;

procedure Tmenu_funcionarios.img_alterarClick(Sender: TObject);
begin
 with Conexao_db.stp_alterar_funcionario do
 begin
  close;
  menu_funcionarios.edt_nome :=
  ParamByName('@ID').Value :=  dbg_grid_consulta.Fields[0].Value;
  ParamByName('@NOME').Value := Cadastro_funcionario.frm_cad_funcionario.edt_nome.Text;
  {aramByName('@DATA_NASCIMENTO').Value :=
  ParamByName('@RUA').Value :=
  ParamByName('@NUMERO').Value :=
  ParamByName('@BAIRRO').Value :=
  ParamByName('@CIDADE').Value :=
  ParamByName('@COMPLEMENTO').Value :=
  ParamByName('@CEP').Value :=
  ParamByName('@CARGO').Value :=
  ParamByName('@SALARIO').Value :=    }
  ExecProc;
 end;

end;

procedure Tmenu_funcionarios.img_incluirClick(Sender: TObject);

begin
  var
  frm_cad_funcionario: Tfrm_cad_funcionario;
  frm_cad_funcionario := Tfrm_cad_funcionario.Create(Self);
  frm_cad_funcionario.ShowModal;
end;


end.
